# 项目改进计划

## 🚨 必须完成（达到议题二要求）

### 1. 多步骤任务组合 ⭐⭐⭐⭐⭐
**优先级**：P0（最高）

**需求**：
- 用户："帮我写一篇关于 AI 的文章，保存到桌面，然后发邮件给自己"
- 系统应该自动组合多个步骤执行

**工作量**：2-3 天

**实现清单**：
- [ ] 新增 `MultiStepIntent` schema
- [ ] 修改 LLM prompt 支持多步骤规划
- [ ] 实现 `MultiStepExecutor` 执行器
- [ ] 添加步骤间上下文传递
- [ ] 测试用例：写文章→保存→发邮件

**示例代码位置**：
- `app/schema.py` - 添加 MultiStepIntent
- `app/planner.py` - 修改 LLM 提示
- `app/executor.py` - 添加 MultiStepExecutor

---

### 2. 内容创作功能 ⭐⭐⭐⭐⭐
**优先级**：P0（最高）

**需求**：
- "写一篇 500 字关于 AI 的文章"
- "帮我写一个 Python 排序函数"
- "生成一封感谢信"

**工作量**：1-2 天

**实现清单**：
- [ ] 新增 `content_creation` intent
- [ ] 调用 LLM 生成长文本
- [ ] 支持保存到文件/笔记
- [ ] 添加内容类型：article/code/email/letter
- [ ] 测试用例：生成文章并保存

**示例代码位置**：
- `app/schema.py` - 添加 content_creation 到 IntentName
- `app/executor.py` - 添加 _execute_content_creation()
- `prompts/fewshot.jsonl` - 添加示例

---

### 3. 真实语音识别（可选） ⭐⭐⭐
**优先级**：P1（重要但非必须）

**选项 A**：集成 Faster Whisper（推荐）
```bash
pip install faster-whisper
```

**选项 B**：文档说明（当前方案）
- 在 README 中说明 ASR 是占位符
- 提供集成方案的详细文档
- 证明接口已预留，易于替换

**工作量**：
- 选项 A：3-5 天（包括测试）
- 选项 B：1 小时（更新文档）

**建议**：先用选项 B，时间充裕再做选项 A

---

## ✅ 已完成的功能

- [x] LLM 集成（Claude Sonnet 4.5）
- [x] 意图识别（LLM + 规则双引擎）
- [x] 系统控制（音量）
- [x] 播放音乐
- [x] 网页搜索
- [x] 创建笔记
- [x] 应用控制
- [x] 安全机制
- [x] TTS 反馈
- [x] 设计文档（DESIGN_DOC.md）

---

## 📅 开发时间估算

| 任务 | 优先级 | 预估时间 | 状态 |
|------|--------|----------|------|
| 多步骤组合 | P0 | 2-3 天 | ❌ 待开发 |
| 内容创作 | P0 | 1-2 天 | ❌ 待开发 |
| 真实语音识别 | P1 | 3-5 天 | ⚠️ 可选 |
| 文件操作 | P1 | 1-2 天 | 🔄 规划中 |
| **总计** | - | **4-5 天** | - |

---

## 🎯 最小可交付版本（2-3天）

如果时间紧张，优先完成：

### Day 1：多步骤组合（核心）
- [ ] 修改 Schema 支持多步骤
- [ ] 更新 LLM prompt
- [ ] 实现基础 MultiStepExecutor
- [ ] 测试：写笔记→保存

### Day 2：内容创作
- [ ] 添加 content_creation intent
- [ ] 实现文章生成
- [ ] 实现代码生成
- [ ] 测试：生成文章→保存到桌面

### Day 3：集成与测试
- [ ] 集成两个新功能
- [ ] 端到端测试
- [ ] 完善文档
- [ ] 准备演示

---

## 📝 交付清单

提交时确保包含：

1. **代码**
   - [ ] 所有源码
   - [ ] 依赖列表（requirements.txt）
   - [ ] 环境配置（.env.example）

2. **文档**
   - [ ] README.md（使用指南）
   - [ ] DESIGN_DOC.md（设计文档，回答 4 个问题）
   - [ ] QUICKSTART.md（快速开始）

3. **测试**
   - [ ] tests/tasks.csv（测试用例）
   - [ ] tests/replay.py（评估脚本）
   - [ ] 准确率报告

4. **演示**
   - [ ] 录屏或截图
   - [ ] 示例命令清单
   - [ ] 效果说明

---

## 🚀 下一步行动

### 现在立即做：
1. 确认是否需要实现多步骤组合和内容创作
2. 评估开发时间是否充足
3. 决定语音识别方案（真实集成 or 文档说明）

### 如果继续开发：
```bash
# 创建新分支
git checkout -b feature/multi-step-content-creation

# 开始开发多步骤功能
# 详见 DESIGN_DOC.md 第三章第 3.1 节
```

### 如果时间不够：
- 重点完善 DESIGN_DOC.md
- 在文档中详细说明未实现功能的设计方案
- 证明架构已支持扩展

---

**总结**：当前项目已完成 70% 要求，核心架构扎实。需要补充多步骤组合和内容创作功能才能完全满足议题二的要求。
